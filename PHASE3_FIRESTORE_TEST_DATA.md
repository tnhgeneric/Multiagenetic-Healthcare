# Phase 3 E2E Testing - Firestore Test Data Setup

**Date**: November 15, 2025  
**Purpose**: Populate sample data in Firestore for E2E testing  
**Collections**: Patient, appointments, medications, labReports, medicalHistory, tasks

---

## Test User Accounts

Create these users in Firebase Authentication:

### Patient User
- **Email**: patient@test.com
- **Password**: TestPassword123!
- **UID**: (Auto-generated by Firebase)
- **Role**: Patient

### Doctor User
- **Email**: doctor@test.com
- **Password**: TestPassword123!
- **UID**: (Auto-generated by Firebase)
- **Role**: Doctor

---

## Firestore Collections & Documents

### 1. Patient Collection

Create document: `Patient/{patient_uid}`

```json
{
  "uid": "{patient_uid}",
  "fullName": "John Robert Smith",
  "dateOfBirth": "1985-05-15",
  "gender": "Male",
  "bloodType": "O+",
  "phone": "+1-555-123-4567",
  "email": "john.smith@email.com",
  "allergies": "Penicillin, Shellfish, Peanuts",
  "chronicConditions": ["Hypertension", "Type 2 Diabetes"],
  "insuranceId": "INS-2025-001234",
  "primaryDoctor": "{doctor_uid}",
  "emergencyContact": {
    "name": "Jane Smith",
    "phone": "+1-555-987-6543",
    "relationship": "Spouse"
  },
  "createdAt": "2024-01-15T10:30:00Z",
  "updatedAt": "2025-11-15T10:30:00Z"
}
```

---

### 2. Medications Collection

Create documents: `medications/{medication_id_1}`, `medications/{medication_id_2}`, etc.

#### Medication 1 (Active - Refill OK)
```json
{
  "id": "med001",
  "patientId": "{patient_uid}",
  "name": "Lisinopril",
  "dosage": "10mg",
  "frequency": "Once daily",
  "startDate": "2025-03-15",
  "endDate": "2026-03-15",
  "status": "active",
  "prescribedBy": "Dr. James Wilson",
  "notes": "For blood pressure control",
  "createdAt": "2025-03-15T09:00:00Z"
}
```

#### Medication 2 (Active - Refill Low)
```json
{
  "id": "med002",
  "patientId": "{patient_uid}",
  "name": "Metformin",
  "dosage": "500mg",
  "frequency": "Twice daily",
  "startDate": "2025-02-01",
  "endDate": "2026-02-01",
  "status": "active",
  "prescribedBy": "Dr. Sarah Johnson",
  "notes": "For diabetes management",
  "createdAt": "2025-02-01T10:15:00Z"
}
```

#### Medication 3 (Inactive)
```json
{
  "id": "med003",
  "patientId": "{patient_uid}",
  "name": "Amoxicillin",
  "dosage": "500mg",
  "frequency": "Three times daily",
  "startDate": "2025-10-15",
  "endDate": "2025-10-25",
  "status": "inactive",
  "prescribedBy": "Dr. Michael Brown",
  "notes": "Completed course for infection",
  "createdAt": "2025-10-15T14:00:00Z"
}
```

---

### 3. Lab Reports Collection

Create documents: `labReports/{report_id_1}`, `labReports/{report_id_2}`, etc.

#### Lab Report 1 (Recent - Glucose)
```json
{
  "id": "lab001",
  "patientId": "{patient_uid}",
  "testName": "Blood Glucose",
  "date": "2025-11-10",
  "results": {
    "glucose": 95,
    "hba1c": 5.2
  },
  "normalRange": {
    "glucose": "70-100",
    "hba1c": "< 5.7"
  },
  "status": "complete",
  "notes": "Normal results. Continue current regimen",
  "createdAt": "2025-11-10T14:30:00Z"
}
```

#### Lab Report 2 (Recent - Lipid Panel)
```json
{
  "id": "lab002",
  "patientId": "{patient_uid}",
  "testName": "Lipid Panel",
  "date": "2025-11-08",
  "results": {
    "totalCholesterol": 195,
    "ldl": 115,
    "hdl": 50,
    "triglycerides": 120
  },
  "normalRange": {
    "totalCholesterol": "< 200",
    "ldl": "< 130",
    "hdl": "> 40",
    "triglycerides": "< 150"
  },
  "status": "complete",
  "notes": "Results within acceptable range",
  "createdAt": "2025-11-08T10:00:00Z"
}
```

#### Lab Report 3 (Older - Blood Pressure)
```json
{
  "id": "lab003",
  "patientId": "{patient_uid}",
  "testName": "Blood Pressure",
  "date": "2025-10-20",
  "results": {
    "systolic": 125,
    "diastolic": 82
  },
  "normalRange": {
    "systolic": "< 120",
    "diastolic": "< 80"
  },
  "status": "complete",
  "notes": "Slightly elevated. Continue monitoring",
  "createdAt": "2025-10-20T11:30:00Z"
}
```

#### Lab Report 4 (Pending)
```json
{
  "id": "lab004",
  "patientId": "{patient_uid}",
  "testName": "Complete Blood Count",
  "date": "2025-11-14",
  "results": {},
  "normalRange": {},
  "status": "pending",
  "notes": "Awaiting lab processing",
  "createdAt": "2025-11-14T09:00:00Z"
}
```

---

### 4. Medical History Collection

Create documents: `medicalHistory/{history_id_1}`, `medicalHistory/{history_id_2}`, etc.

#### History Entry 1 (Diagnosis)
```json
{
  "id": "hist001",
  "patientId": "{patient_uid}",
  "type": "diagnosis",
  "title": "Hypertension Diagnosis",
  "date": "2024-03-20",
  "description": "Patient diagnosed with Stage 1 Hypertension during routine checkup",
  "doctor": "James Wilson",
  "hospital": "City Hospital",
  "notes": "Started on Lisinopril 10mg daily. Follow-up in 3 months",
  "createdAt": "2024-03-20T15:00:00Z"
}
```

#### History Entry 2 (Procedure)
```json
{
  "id": "hist002",
  "patientId": "{patient_uid}",
  "type": "procedure",
  "title": "Blood Glucose Monitoring",
  "date": "2025-06-15",
  "description": "Continuous glucose monitor (CGM) device placed for 14-day monitoring",
  "doctor": "Sarah Johnson",
  "hospital": "Diabetes Care Center",
  "notes": "Device removed after 14 days. Data collected for trend analysis",
  "createdAt": "2025-06-15T10:00:00Z"
}
```

#### History Entry 3 (Vaccination)
```json
{
  "id": "hist003",
  "patientId": "{patient_uid}",
  "type": "procedure",
  "title": "COVID-19 Booster Vaccination",
  "date": "2025-09-10",
  "description": "2025 COVID-19 bivalent booster vaccine administered",
  "doctor": "Maria Garcia",
  "hospital": "Community Health Clinic",
  "notes": "Vaccination completed without adverse reactions",
  "createdAt": "2025-09-10T13:30:00Z"
}
```

#### History Entry 4 (Surgery)
```json
{
  "id": "hist004",
  "patientId": "{patient_uid}",
  "type": "surgery",
  "title": "Appendectomy",
  "date": "2023-08-05",
  "description": "Emergency appendectomy performed due to acute appendicitis",
  "doctor": "Robert Martinez",
  "hospital": "General Hospital",
  "notes": "Surgery successful. Recovery uneventful. Discharged after 3 days",
  "createdAt": "2023-08-05T16:45:00Z"
}
```

---

### 5. Tasks Collection

Create documents: `tasks/{task_id_1}`, `tasks/{task_id_2}`, etc.

#### Task 1 (Today - Medication Reminder)
```json
{
  "id": "task001",
  "patientId": "{patient_uid}",
  "title": "Take Morning Medication",
  "time": "08:00",
  "subtitle": "Lisinopril 10mg",
  "type": "task",
  "date": "2025-11-15",
  "completed": false,
  "avatars": [],
  "createdAt": "2025-11-15T00:00:00Z"
}
```

#### Task 2 (Today - Doctor Appointment)
```json
{
  "id": "task002",
  "patientId": "{patient_uid}",
  "title": "Appointment with Dr. Wilson",
  "time": "14:30",
  "subtitle": "Blood Pressure Checkup",
  "type": "meeting",
  "date": "2025-11-15",
  "completed": false,
  "avatars": ["doctor_avatar_url"],
  "createdAt": "2025-11-15T00:00:00Z"
}
```

#### Task 3 (Tomorrow - Lab Work)
```json
{
  "id": "task003",
  "patientId": "{patient_uid}",
  "title": "Lab Work - Glucose Test",
  "time": "09:00",
  "subtitle": "Fasting required. Do not eat after 8 PM",
  "type": "task",
  "date": "2025-11-16",
  "completed": false,
  "avatars": [],
  "createdAt": "2025-11-15T10:00:00Z"
}
```

#### Task 4 (Day 3 - Medication Reminder)
```json
{
  "id": "task004",
  "patientId": "{patient_uid}",
  "title": "Evening Medication",
  "time": "20:00",
  "subtitle": "Metformin 500mg",
  "type": "task",
  "date": "2025-11-17",
  "completed": false,
  "avatars": [],
  "createdAt": "2025-11-15T10:00:00Z"
}
```

#### Task 5 (Completed Past Task)
```json
{
  "id": "task005",
  "patientId": "{patient_uid}",
  "title": "Morning Medication",
  "time": "08:00",
  "subtitle": "Lisinopril 10mg",
  "type": "task",
  "date": "2025-11-14",
  "completed": true,
  "avatars": [],
  "createdAt": "2025-11-14T00:00:00Z"
}
```

---

### 6. Appointments Collection

Create documents: `appointments/{appointment_id_1}`, `appointments/{appointment_id_2}`, etc.

#### Appointment 1 (Today - Scheduled)
```json
{
  "id": "appt001",
  "patientId": "{patient_uid}",
  "doctorId": "{doctor_uid}",
  "doctorName": "Dr. James Wilson",
  "date": "2025-11-15",
  "time": "14:30",
  "status": "scheduled",
  "notes": "Blood pressure checkup and medication review",
  "type": "meeting",
  "createdAt": "2025-11-01T10:00:00Z"
}
```

#### Appointment 2 (Future - Scheduled)
```json
{
  "id": "appt002",
  "patientId": "{patient_uid}",
  "doctorId": "{doctor_uid}",
  "doctorName": "Dr. Sarah Johnson",
  "date": "2025-11-22",
  "time": "10:00",
  "status": "scheduled",
  "notes": "Diabetes management consultation",
  "type": "meeting",
  "createdAt": "2025-11-10T14:00:00Z"
}
```

#### Appointment 3 (Past - Completed)
```json
{
  "id": "appt003",
  "patientId": "{patient_uid}",
  "doctorId": "{doctor_uid}",
  "doctorName": "Dr. Michael Brown",
  "date": "2025-11-08",
  "time": "11:00",
  "status": "completed",
  "notes": "General health checkup",
  "type": "meeting",
  "createdAt": "2025-10-25T09:00:00Z"
}
```

---

## Setup Instructions

### Option 1: Manual Entry in Firebase Console

1. Go to [Firebase Console](https://console.firebase.google.com/)
2. Select your project
3. Go to Firestore Database
4. Create each collection and document manually using the JSON above
5. Verify data appears correctly

### Option 2: Firestore Import (If Supported)

1. Export JSON from this file
2. Use Firestore batch import feature (if available in your Firebase plan)
3. Verify import succeeded

### Option 3: Programmatic Setup

Create a setup script in Node.js or Python:

```typescript
// Example TypeScript setup
import { getFirestore, collection, setDoc, doc } from 'firebase/firestore';
import { initializeApp } from 'firebase/app';

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// Add patient data
await setDoc(doc(db, 'Patient', patientUid), {
  // ... patient data from above
});

// Add medications
await setDoc(doc(db, 'medications', 'med001'), {
  // ... medication data
});

// Continue for all collections...
```

---

## Verification Checklist

After setting up test data, verify:

- [ ] Patient document exists with all required fields
- [ ] At least 2 active medications in medications collection
- [ ] At least 3 lab reports (mix of complete/pending)
- [ ] At least 3 medical history entries with different types
- [ ] At least 5 tasks (mix of dates and completed status)
- [ ] At least 2 appointments (scheduled/completed)
- [ ] User UID in documents matches authenticated test user
- [ ] All dates are formatted as ISO 8601 strings (YYYY-MM-DD)
- [ ] All UIDs and references are valid

---

## Testing Data Size Reference

| Collection | Documents | Purpose |
|-----------|-----------|---------|
| Patient | 1 | Test user profile |
| medications | 3 | Active + Inactive |
| labReports | 4 | Various types & statuses |
| medicalHistory | 4 | Different record types |
| tasks | 5 | Past, Today, Future |
| appointments | 3 | Past, Current, Future |
| **Total** | **20** | **Full test coverage** |

---

## Important Notes

1. **UIDs**: Replace `{patient_uid}` and `{doctor_uid}` with actual Firebase UID
2. **Dates**: Use current dates for better testing (adjust dates as needed)
3. **Data Persistence**: This data will persist in Firestore for future tests
4. **Cleanup**: After testing, you can delete test collections or keep for regression testing
5. **Firestore Rules**: Ensure your Firestore security rules allow read/write for test users

---

## Next Steps

1. Set up this test data in Firestore
2. Create test user accounts in Firebase Authentication
3. Run Phase 3 E2E tests as described in `PHASE3_E2E_TESTING_QUICKSTART.md`
4. Record test results in `PHASE3_E2E_TESTING_EXECUTION.md`

---

**Ready for E2E Testing! ðŸš€**

